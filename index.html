<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>استبيان إدمان الهاتف وجودة النوم</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to right, #6dd5ed, #2193b0);
    color: #333;
    padding: 20px;
}
h1, h2 {
    text-align: center;
    color: #fff;
}
form {
    background: #fff;
    padding: 20px;
    border-radius: 15px;
    max-width: 900px;
    margin: auto;
}
.question {
    margin-bottom: 15px;
}
.options label {
    margin-right: 15px;
    display: inline-block;
}
button {
    background-color: #2193b0;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    cursor: pointer;
}
button:hover {
    background-color: #6dd5ed;
}
#result {
    margin-top: 20px;
    font-weight: bold;
    text-align: center;
    font-size: 1.2em;
    color: #fff;
}
a.subscribe {
    display: block;
    margin-top: 20px;
    text-align: center;
    color: #fff;
    text-decoration: underline;
}
</style>
</head>
<body>

<h1>استبيان إدمان الهاتف وجودة النوم</h1>
<form id="surveyForm">

<h2>مقياس إدمان الهاتف SAS-SV</h2>

<!-- أسئلة SAS-SV كاملة (10 أسئلة) -->
<div class="question">1. أُهمِل بعض الأعمال المخططة بسبب استخدامي للهاتف الذكي.</div>
<div class="options">
<label><input type="radio" name="q1" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q1" value="2"> لا أوافق</label>
<label><input type="radio" name="q1" value="3"> محايد</label>
<label><input type="radio" name="q1" value="4"> أوافق</label>
<label><input type="radio" name="q1" value="5"> أوافق بشدة</label>
</div>

<div class="question">2. أجد صعوبة في التركيز أثناء الدراسة أو المحاضرة بسبب استخدام الهاتف.</div>
<div class="options">
<label><input type="radio" name="q2" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q2" value="2"> لا أوافق</label>
<label><input type="radio" name="q2" value="3"> محايد</label>
<label><input type="radio" name="q2" value="4"> أوافق</label>
<label><input type="radio" name="q2" value="5"> أوافق بشدة</label>
</div>

<div class="question">3. أشعر بألم في المعصم أو الرقبة أثناء استخدام الهاتف.</div>
<div class="options">
<label><input type="radio" name="q3" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q3" value="2"> لا أوافق</label>
<label><input type="radio" name="q3" value="3"> محايد</label>
<label><input type="radio" name="q3" value="4"> أوافق</label>
<label><input type="radio" name="q3" value="5"> أوافق بشدة</label>
</div>

<div class="question">4. أشعر بالتوتر عندما لا أكون ممسكًا بالهاتف.</div>
<div class="options">
<label><input type="radio" name="q4" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q4" value="2"> لا أوافق</label>
<label><input type="radio" name="q4" value="3"> محايد</label>
<label><input type="radio" name="q4" value="4"> أوافق</label>
<label><input type="radio" name="q4" value="5"> أوافق بشدة</label>
</div>

<div class="question">5. أفكر في الهاتف حتى عندما لا أستخدمه.</div>
<div class="options">
<label><input type="radio" name="q5" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q5" value="2"> لا أوافق</label>
<label><input type="radio" name="q5" value="3"> محايد</label>
<label><input type="radio" name="q5" value="4"> أوافق</label>
<label><input type="radio" name="q5" value="5"> أوافق بشدة</label>
</div>

<div class="question">6. أقضي وقتًا أطول مما خططت له في استخدام الهاتف.</div>
<div class="options">
<label><input type="radio" name="q6" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q6" value="2"> لا أوافق</label>
<label><input type="radio" name="q6" value="3"> محايد</label>
<label><input type="radio" name="q6" value="4"> أوافق</label>
<label><input type="radio" name="q6" value="5"> أوافق بشدة</label>
</div>

<div class="question">7. يخبرني من حولي أنني أستخدم الهاتف كثيرًا.</div>
<div class="options">
<label><input type="radio" name="q7" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q7" value="2"> لا أوافق</label>
<label><input type="radio" name="q7" value="3"> محايد</label>
<label><input type="radio" name="q7" value="4"> أوافق</label>
<label><input type="radio" name="q7" value="5"> أوافق بشدة</label>
</div>

<div class="question">8. أستخدم الهاتف لفترة أطول مما كنت أنوي.</div>
<div class="options">
<label><input type="radio" name="q8" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q8" value="2"> لا أوافق</label>
<label><input type="radio" name="q8" value="3"> محايد</label>
<label><input type="radio" name="q8" value="4"> أوافق</label>
<label><input type="radio" name="q8" value="5"> أوافق بشدة</label>
</div>

<div class="question">9. أستخدم الهاتف للهروب من المشاعر السلبية أو الواقع.</div>
<div class="options">
<label><input type="radio" name="q9" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q9" value="2"> لا أوافق</label>
<label><input type="radio" name="q9" value="3"> محايد</label>
<label><input type="radio" name="q9" value="4"> أوافق</label>
<label><input type="radio" name="q9" value="5"> أوافق بشدة</label>
</div>

<div class="question">10. أشعر بالقلق عندما أكون بدون الهاتف.</div>
<div class="options">
<label><input type="radio" name="q10" value="1" required> بشدة لا أوافق</label>
<label><input type="radio" name="q10" value="2"> لا أوافق</label>
<label><input type="radio" name="q10" value="3"> محايد</label>
<label><input type="radio" name="q10" value="4"> أوافق</label>
<label><input type="radio" name="q10" value="5"> أوافق بشدة</label>
</div>

<h2>مقياس جودة النوم PSQI</h2>

<!-- أسئلة PSQI 7 مكونات -->
<div class="question">1. كيف تُقيّم جودة نومك بشكل عام؟</div>
<div class="options">
<label><input type="radio" name="sleep1" value="0" required> ممتاز</label>
<label><input type="radio" name="sleep1" value="1"> جيد</label>
<label><input type="radio" name="sleep1" value="2"> سيئ</label>
<label><input type="radio" name="sleep1" value="3"> سيئ جدًا</label>
</div>

<div class="question">2. كم دقيقة يستغرقك عادةً لتغفو كل ليلة؟</div>
<div class="options">
<label><input type="radio" name="sleep2" value="0" required> أقل من 15 دقيقة</label>
<label><input type="radio" name="sleep2" value="1"> 15–30 دقيقة</label>
<label><input type="radio" name="sleep2" value="2"> 31–60 دقيقة</label>
<label><input type="radio" name="sleep2" value="3"> أكثر من 60 دقيقة</label>
</div>

<div class="question">3. كم مرة واجهت صعوبة في النوم خلال 30 دقيقة من الاستلقاء؟</div>
<div class="options">
<label><input type="radio" name="sleep3" value="0" required> لم يحدث</label>
<label><input type="radio" name="sleep3" value="1"> أقل من مرة أسبوعيًا</label>
<label><input type="radio" name="sleep3" value="2"> مرة أو مرتين أسبوعيًا</label>
<label><input type="radio" name="sleep3" value="3"> ثلاث مرات أو أكثر أسبوعيًا</label>
</div>

<div class="question">4. كم عدد ساعات النوم الفعلية التي تحصل عليها في الليلة؟</div>
<div class="options">
<label><input type="radio" name="sleep4" value="0" required> أكثر من 7 ساعات</label>
<label><input type="radio" name="sleep4" value="1"> 6–7 ساعات</label>
<label><input type="radio" name="sleep4" value="2"> 5–6 ساعات</label>
<label><input type="radio" name="sleep4" value="3"> أقل من 5 ساعات</label>
</div>

<div class="question">5. كم مرة واجهت مشاكل في النوم بسبب اضطرابات مختلفة (استيقاظ، حاجة للحمام، أحلام مزعجة، ألم)؟</div>
<div class="options">
<label><input type="radio" name="sleep5" value="0" required> لم يحدث</label>
<label><input type="radio" name="sleep5" value="1"> مرة واحدة أسبوعيًا</label>
<label><input type="radio" name="sleep5" value="2"> مرتين أسبوعيًا</label>
<label><input type="radio" name="sleep5" value="3"> ثلاث مرات أو أكثر أسبوعيًا</label>
</div>

<div class="question">6. كم مرة تناولت دواءً لمساعدتك على النوم؟</div>
<div class="options">
<label><input type="radio" name="sleep6" value="0" required> لم يحدث</label>
<label><input type="radio" name="sleep6" value="1"> مرة واحدة أسبوعيًا</label>
<label><input type="radio" name="sleep6" value="2"> مرتين أسبوعيًا</label>
<label><input type="radio" name="sleep6" value="3"> ثلاث مرات أو أكثر أسبوعيًا</label>
</div>

<div class="question">7. كم مرة واجهت صعوبة في البقاء مستيقظًا خلال الأنشطة النهارية؟</div>
<div class="options">
<label><input type="radio" name="sleep7" value="0" required> لم يحدث</label>
<label><input type="radio" name="sleep7" value="1"> مرة واحدة أسبوعيًا</label>
<label><input type="radio" name="sleep7" value="2"> مرتين أسبوعيًا</label>
<label><input type="radio" name="sleep7" value="3"> ثلاث مرات أو أكثر أسبوعيًا</label>
</div>

<button type="submit">إرسال</button>
</form>

<div id="result"></div>

<a class="subscribe" href="https://script.google.com/macros/s/AKfycbxYTCcpvnUqWLlQ1_XlebFmWYuaEvcPwdc8TElffM-pIknh3mYEprraa957hNrysEkCLA/exec" target="_blank">اشترك في التحديثات</a>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzEa9iZqY0K-iCW5ZWugXnd1V7yXfWM-9zsY0VNIjATWLThGiXv3eohYgCtZ0h-nXbl2w/exec";

document.getElementById("surveyForm").addEventListener("submit", function(e){
    e.preventDefault();
    const form = e.target;

    // حساب نقاط SAS-SV
    let total = 0;
    for(let i=1;i<=10;i++){
        total += parseInt(form["q"+i].value);
    }
    let resultText = "";
    if(total >= 31){ resultText = "انت مصاب بإدمان الهاتف!"; }
    else if(total >= 10){ resultText = "لديك ميل لإدمان الهاتف"; }
    else{ resultText = "استخدام الهاتف طبيعي"; }

    // حساب نقاط PSQI
    let sleepTotal = 0;
    for(let i=1;i<=7;i++){
        sleepTotal += parseInt(form["sleep"+i].value);
    }
    let sleepText = "";
    if(sleepTotal >= 15){ sleepText = "اضطراب نوم شديد"; }
    else if(sleepTotal >= 10){ sleepText = "نوم ضعيف"; }
    else if(sleepTotal >= 5){ sleepText = "نوم متوسط الجودة"; }
    else{ sleepText = "نوم جيد جدًا"; }

    document.getElementById("result").innerHTML = 
        "نتيجة إدمان الهاتف: " + resultText + "<br>" +
        "نتيجة جودة النوم: " + sleepText;

    // إرسال الردود إلى Google Sheets
    fetch(WEB_APP_URL, {
        method: "POST",
        body: JSON.stringify({
            mqa: "SAS-SV + PSQI",
            total: total,
            sleepTotal: sleepTotal,
            resultText: resultText + " | " + sleepText
        })
    })
    .then(response => response.json())
    .then(data => console.log("تم الإرسال:", data))
    .catch(err => console.error("خطأ في الإرسال:", err));
});
</script>

</body>
</html>
